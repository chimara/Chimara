<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Graphics in Text Buffer Windows</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="Chimara Reference Manual">
<link rel="up" href="chimara-glk-spec-graphics.html" title="Graphics">
<link rel="prev" href="chimara-Graphics-in-Graphics-Windows.html" title="Graphics in Graphics Windows">
<link rel="next" href="chimara-Testing-for-Graphics-Capabilities.html" title="Testing for Graphics Capabilities">
<meta name="generator" content="GTK-Doc V1.25 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#chimara-Graphics-in-Text-Buffer-Windows.description" class="shortcut">Description</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="chimara-glk-spec-graphics.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="chimara-Graphics-in-Graphics-Windows.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="chimara-Testing-for-Graphics-Capabilities.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry" lang="en">
<a name="chimara-Graphics-in-Text-Buffer-Windows"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="chimara-Graphics-in-Text-Buffer-Windows.top_of_page"></a>Graphics in Text Buffer Windows</span></h2>
<p>Graphics in Text Buffer Windows — Drawing graphics inside or beside text</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1" lang="en">
<a name="chimara-Graphics-in-Text-Buffer-Windows.functions"></a><h2>Functions</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a href="chimara-Graphics-in-Text-Buffer-Windows.html#glk-window-flow-break" title="glk_window_flow_break ()">glk_window_flow_break</a> <span class="c_punctuation">()</span>
</td>
</tr></tbody>
</table></div>
</div>
<div class="refsect1" lang="en">
<a name="chimara-Graphics-in-Text-Buffer-Windows.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="define_keyword">#define</td>
<td class="function_name"><a href="chimara-Graphics-in-Text-Buffer-Windows.html#imagealign-InlineUp" title="imagealign_InlineUp">imagealign_InlineUp</a></td>
</tr>
<tr>
<td class="define_keyword">#define</td>
<td class="function_name"><a href="chimara-Graphics-in-Text-Buffer-Windows.html#imagealign-InlineDown" title="imagealign_InlineDown">imagealign_InlineDown</a></td>
</tr>
<tr>
<td class="define_keyword">#define</td>
<td class="function_name"><a href="chimara-Graphics-in-Text-Buffer-Windows.html#imagealign-InlineCenter" title="imagealign_InlineCenter">imagealign_InlineCenter</a></td>
</tr>
<tr>
<td class="define_keyword">#define</td>
<td class="function_name"><a href="chimara-Graphics-in-Text-Buffer-Windows.html#imagealign-MarginLeft" title="imagealign_MarginLeft">imagealign_MarginLeft</a></td>
</tr>
<tr>
<td class="define_keyword">#define</td>
<td class="function_name"><a href="chimara-Graphics-in-Text-Buffer-Windows.html#imagealign-MarginRight" title="imagealign_MarginRight">imagealign_MarginRight</a></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1" lang="en">
<a name="chimara-Graphics-in-Text-Buffer-Windows.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;libchimara/glk.h&gt;
</pre>
</div>
<div class="refsect1" lang="en">
<a name="chimara-Graphics-in-Text-Buffer-Windows.description"></a><h2>Description</h2>
<p>A text buffer is a linear text stream. You can draw images in-line with this
text. If you are familiar with HTML, you already understand this model. You
draw images with flags indicating alignment. The library takes care of
scrolling, resizing, and reformatting text buffer windows.</p>
<p>If you call <a href="chimara-Image-Resources.html#glk-image-draw" title="glk_image_draw ()"><code class="function">glk_image_draw()</code></a> or <a href="chimara-Image-Resources.html#glk-image-draw-scaled" title="glk_image_draw_scaled ()"><code class="function">glk_image_draw_scaled()</code></a> in a text buffer
window, <em class="parameter"><code>val1</code></em>
 gives the image alignment. The <em class="parameter"><code>val2</code></em>
 argument is currently
unused, and should always be zero.</p>
<p>The two “margin” alignments require some care.
To allow proper positioning, images using <a href="chimara-Graphics-in-Text-Buffer-Windows.html#imagealign-MarginLeft" title="imagealign_MarginLeft"><code class="literal">imagealign_MarginLeft</code></a> and
<a href="chimara-Graphics-in-Text-Buffer-Windows.html#imagealign-MarginRight" title="imagealign_MarginRight"><code class="literal">imagealign_MarginRight</code></a> must be placed at the beginning of a line.
That is, you may only call <a href="chimara-Image-Resources.html#glk-image-draw" title="glk_image_draw ()"><code class="function">glk_image_draw()</code></a> (with these two alignments) in a
window, if you have just printed a newline to the window's stream, or if the
window is entirely empty.
If you margin-align an image in a line where text has already appeared, no 
image will appear at all.</p>
<p>Inline-aligned images count as “text” for the purpose of this rule.</p>
<p>You may have images in both margins at the same time.</p>
<p>It is also legal to have more than one image in the same margin (left or 
right.) However, this is not recommended. It is difficult to predict how text
will wrap in that situation, and libraries may err on the side of 
conservatism.</p>
</div>
<div class="refsect1" lang="en">
<a name="chimara-Graphics-in-Text-Buffer-Windows.functions_details"></a><h2>Functions</h2>
<div class="refsect2" lang="en">
<a name="glk-window-flow-break"></a><h3>glk_window_flow_break ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
glk_window_flow_break (<em class="parameter"><code><a href="chimara-Opaque-Objects.html#winid-t" title="winid_t"><span class="type">winid_t</span></a> win</code></em>);</pre>
<p>You may wish to “break” the stream of text down below the current margin
image.
Since lines of text can be in any font and size, you cannot do this by
counting newlines.
Instead, use this function.</p>
<p>If the current point in the text is indented around a margin-aligned image, 
this acts like the correct number of newlines to start a new line below the 
image. (If there are several margin-aligned images, it goes below all of 
them.) If the current point is not beside a margin-aligned image, this call 
has no effect.</p>
<p>When a text buffer window is resized, a flow-break behaves cleverly; it may 
become active or inactive as necessary. You can consider this function to 
insert an invisible mark in the text stream. The mark works out how many 
newlines it needs to be whenever the text is formatted for display.</p>
<p>An example of the use of <a href="chimara-Graphics-in-Text-Buffer-Windows.html#glk-window-flow-break" title="glk_window_flow_break ()"><code class="function">glk_window_flow_break()</code></a>: If you display a 
left-margin image at the start of every line, they can stack up in a strange 
diagonal way that eventually squeezes all the text off the screen. </p>
<div class="note">
<h3 class="title"></h3>
<p>
  If you can't picture this, draw some diagrams. Make the margin images more 
  than one line tall, so that each line starts already indented around the 
  last image.
</p>
</div>
<p>To avoid this problem, call <a href="chimara-Graphics-in-Text-Buffer-Windows.html#glk-window-flow-break" title="glk_window_flow_break ()"><code class="function">glk_window_flow_break()</code></a> immediately before 
<a href="chimara-Image-Resources.html#glk-image-draw" title="glk_image_draw ()"><code class="function">glk_image_draw()</code></a> for every margin-aligned image.</p>
<p>In all windows other than text buffers, <a href="chimara-Graphics-in-Text-Buffer-Windows.html#glk-window-flow-break" title="glk_window_flow_break ()"><code class="function">glk_window_flow_break()</code></a> has no 
effect. </p>
<div class="warning">
<h3 class="title"></h3>
<p>
  This function is not implemented yet.
</p>
</div>
<div class="refsect3" lang="en">
<a name="glk-window-flow-break.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>win</p></td>
<td class="parameter_description"><p>A window.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="chimara-Graphics-in-Text-Buffer-Windows.other_details"></a><h2>Types and Values</h2>
<div class="refsect2" lang="en">
<a name="imagealign-InlineUp"></a><h3>imagealign_InlineUp</h3>
<pre class="programlisting">#define imagealign_InlineUp (0x01)
</pre>
<p>The image appears at the current point in the text, sticking up. That is, the
bottom edge of the image is aligned with the baseline of the line of text.</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="imagealign-InlineDown"></a><h3>imagealign_InlineDown</h3>
<pre class="programlisting">#define imagealign_InlineDown (0x02)
</pre>
<p>The image appears at the current point, and the top edge is aligned with the
top of the line of text.</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="imagealign-InlineCenter"></a><h3>imagealign_InlineCenter</h3>
<pre class="programlisting">#define imagealign_InlineCenter (0x03)
</pre>
<p>The image appears at the current point, and it is centered between the top
and baseline of the line of text. If the image is taller than the line of
text, it will stick up and down equally.</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="imagealign-MarginLeft"></a><h3>imagealign_MarginLeft</h3>
<pre class="programlisting">#define imagealign_MarginLeft (0x04)
</pre>
<p>The image appears in the left margin. Subsequent text will be displayed to
the right of the image, and will flow around it — that is, it will be
left-indented for as many lines as it takes to pass the image.</p>
<div class="warning">
<h3 class="title"></h3>
<p>Margin images are not implemented yet.</p>
</div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="imagealign-MarginRight"></a><h3>imagealign_MarginRight</h3>
<pre class="programlisting">#define imagealign_MarginRight (0x05)
</pre>
<p>The image appears in the right margin, and subsequent text will flow around
it on the left.</p>
<div class="warning">
<h3 class="title"></h3>
<p>Margin images are not implemented yet.</p>
</div>
</div>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.25</div>
</body>
</html>