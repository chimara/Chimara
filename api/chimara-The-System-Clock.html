<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>The System Clock: Chimara Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="Chimara Reference Manual">
<link rel="up" href="chimara-glk-spec-the-system-clock.html" title="The System Clock">
<link rel="prev" href="chimara-glk-spec-the-system-clock.html" title="The System Clock">
<link rel="next" href="chimara-Time-and-Date-Conversions.html" title="Time and Date Conversions">
<meta name="generator" content="GTK-Doc V1.33.1 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#chimara-The-System-Clock.description" class="shortcut">Description</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="chimara-glk-spec-the-system-clock.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="chimara-glk-spec-the-system-clock.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="chimara-Time-and-Date-Conversions.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="chimara-The-System-Clock"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="chimara-The-System-Clock.top_of_page"></a>The System Clock</span></h2>
<p>The System Clock — Getting the current time from the system clock</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="chimara-The-System-Clock.functions"></a><h2>Functions</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="functions_proto_type">
<col class="functions_proto_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="chimara-The-System-Clock.html#glk-current-time" title="glk_current_time ()">glk_current_time</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="chimara-Basic-Types.html#glsi32" title="glsi32"><span class="returnvalue">glsi32</span></a>
</td>
<td class="function_name">
<a class="link" href="chimara-The-System-Clock.html#glk-current-simple-time" title="glk_current_simple_time ()">glk_current_simple_time</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="chimara-The-System-Clock.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="other_proto_type">
<col class="other_proto_name">
</colgroup>
<tbody><tr>
<td class="datatype_keyword"> </td>
<td class="function_name"><a class="link" href="chimara-The-System-Clock.html#glktimeval-t" title="glktimeval_t">glktimeval_t</a></td>
</tr></tbody>
</table></div>
</div>
<div class="refsect1">
<a name="chimara-The-System-Clock.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;libchimara/glk.h&gt;
</pre>
</div>
<div class="refsect1">
<a name="chimara-The-System-Clock.description"></a><h2>Description</h2>
<p>You can get the current time, either as a Unix timestamp (seconds since 1970)
or as a broken-out structure of time elements (year, month, day, hour,
minute, second).</p>
<p>The system clock is not guaranteed to line up with timer events (see <a class="link" href="chimara-Timer-Events.html" title="Timer Events">Timer
Events</a>).
Timer events may be delivered late according to the system clock.</p>
</div>
<div class="refsect1">
<a name="chimara-The-System-Clock.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="glk-current-time"></a><h3>glk_current_time ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
glk_current_time (<em class="parameter"><code><a class="link" href="chimara-The-System-Clock.html#glktimeval-t" title="glktimeval_t"><span class="type">glktimeval_t</span></a> *time</code></em>);</pre>
<p>The current Unix time is stored in the structure <em class="parameter"><code>time</code></em>
. (The argument may not
be <a href="/usr/share/gtk-doc/html/glib/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>.) This is the number of seconds since the beginning of 1970 (UTC).</p>
<p>The first two values in the structure should be considered a single
<span class="emphasis"><em>signed</em></span> 64-bit number. This allows the <a class="link" href="chimara-The-System-Clock.html#glktimeval-t" title="glktimeval_t"><span class="type">glktimeval_t</span></a> to
store a reasonable range of values in the future and past. The <em class="parameter"><code>high_sec</code></em>

value will remain zero until sometime in 2106. If your computer is running in
1969, perhaps due to an unexpected solar flare, then <em class="parameter"><code>high_sec</code></em>
 will be
negative.</p>
<p>The third value in the structure represents a fraction of a second, in
microseconds (from 0 to 999999). The resolution of the <a class="link" href="chimara-The-System-Clock.html#glk-current-time" title="glk_current_time ()"><code class="function">glk_current_time()</code></a>
call is platform-dependent; the <em class="parameter"><code>microsec</code></em>
 value may not be updated
continuously.</p>
<div class="refsect3">
<a name="glk-current-time.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>time</p></td>
<td class="parameter_description"><p>pointer to a <a class="link" href="chimara-The-System-Clock.html#glktimeval-t" title="glktimeval_t"><span class="type">glktimeval_t</span></a> structure.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="glk-current-simple-time"></a><h3>glk_current_simple_time ()</h3>
<pre class="programlisting"><a class="link" href="chimara-Basic-Types.html#glsi32" title="glsi32"><span class="returnvalue">glsi32</span></a>
glk_current_simple_time (<em class="parameter"><code><a class="link" href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> factor</code></em>);</pre>
<p>If dealing with 64-bit values is awkward, you can also get the current time
as a lower-resolution 32-bit value. This is simply the Unix time divided by
the <em class="parameter"><code>factor</code></em>
 argument (which must not be zero). For example, if factor is 60,
the result will be the number of minutes since 1970 (rounded towards negative
infinity). If factor is 1, you will get the Unix time directly, but the value
will be truncated starting some time in 2038.</p>
<div class="refsect3">
<a name="glk-current-simple-time.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>factor</p></td>
<td class="parameter_description"><p>Factor by which to divide the time value.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="glk-current-simple-time.returns"></a><h4>Returns</h4>
<p> Unix time divided by <em class="parameter"><code>factor</code></em>
, truncated to 32 bits.</p>
</div>
</div>
</div>
<div class="refsect1">
<a name="chimara-The-System-Clock.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="glktimeval-t"></a><h3>glktimeval_t</h3>
<pre class="programlisting">typedef struct {
    glsi32 high_sec;
    glui32 low_sec;
    glsi32 microsec;
} glktimeval_t;
</pre>
<p>This structure represents the Unix timestamp, i.e. the number of seconds
since January 1, 1970.</p>
<div class="refsect3">
<a name="glktimeval-t.members"></a><h4>Members</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="300px" class="struct_members_name">
<col class="struct_members_description">
<col width="200px" class="struct_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="struct_member_name"><p><a class="link" href="chimara-Basic-Types.html#glsi32" title="glsi32"><span class="type">glsi32</span></a> <em class="structfield"><code><a name="glktimeval-t.high-sec"></a>high_sec</code></em>;</p></td>
<td class="struct_member_description"><p>The most significant 32 bits of the timestamp in seconds.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><a class="link" href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> <em class="structfield"><code><a name="glktimeval-t.low-sec"></a>low_sec</code></em>;</p></td>
<td class="struct_member_description"><p>The least significant 32 bits of the timestamp in seconds.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><a class="link" href="chimara-Basic-Types.html#glsi32" title="glsi32"><span class="type">glsi32</span></a> <em class="structfield"><code><a name="glktimeval-t.microsec"></a>microsec</code></em>;</p></td>
<td class="struct_member_description"><p>The fraction of the timestamp, in microseconds, ranging from
0-999999.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.33.1</div>
</body>
</html>