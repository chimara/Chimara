<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Echo Streams</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="Chimara Reference Manual">
<link rel="up" href="chimara-glk-spec-windows.html" title="Windows">
<link rel="prev" href="chimara-The-Types-of-Windows.html" title="The Types of Windows">
<link rel="next" href="chimara-Other-Window-Functions.html" title="Other Window Functions">
<meta name="generator" content="GTK-Doc V1.25 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#chimara-Echo-Streams.description" class="shortcut">Description</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="chimara-glk-spec-windows.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="chimara-The-Types-of-Windows.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="chimara-Other-Window-Functions.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry" lang="en">
<a name="chimara-Echo-Streams"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="chimara-Echo-Streams.top_of_page"></a>Echo Streams</span></h2>
<p>Echo Streams — Creating a copy of a window's output</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1" lang="en">
<a name="chimara-Echo-Streams.functions"></a><h2>Functions</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a href="chimara-Echo-Streams.html#glk-window-set-echo-stream" title="glk_window_set_echo_stream ()">glk_window_set_echo_stream</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
</td>
<td class="function_name">
<a href="chimara-Echo-Streams.html#glk-window-get-echo-stream" title="glk_window_get_echo_stream ()">glk_window_get_echo_stream</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1" lang="en">
<a name="chimara-Echo-Streams.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;libchimara/glk.h&gt;
</pre>
</div>
<div class="refsect1" lang="en">
<a name="chimara-Echo-Streams.description"></a><h2>Description</h2>
<p>Every window has an associated window stream; you print to the window by
printing to this stream. However, it is possible to attach a second stream to
a window. Any text printed to the window is also echoed to this second
stream, which is called the window's “echo stream.”</p>
<p>Effectively, any call to <a href="chimara-How-to-Print.html#glk-put-char" title="glk_put_char ()"><code class="function">glk_put_char()</code></a> (or the other output commands) which
is directed to the window's window stream, is replicated to the window's echo
stream. This also goes for the style commands such as <a href="chimara-Styles.html#glk-set-style" title="glk_set_style ()"><code class="function">glk_set_style()</code></a>.</p>
<p>Note that the echoing is one-way. You can still print text directly to the
echo stream, and it will go wherever the stream is bound, but it does not
back up and appear in the window. </p>
<p>An echo stream can be of any type, even another window's window stream.</p>
<div class="note">
<h3 class="title"></h3>
<p>
  This would be somewhat silly, since it would mean that any text printed to
  the window would be duplicated in another window. More commonly, you would
  set a window's echo stream to be a file stream, in order to create a
  transcript file from that window.
</p>
</div>
<p>A window can only have one echo stream. But a single stream can be the echo
stream of any number of windows, sequentially or simultaneously.</p>
<p>If a window is closed, its echo stream remains open; it is not automatically
closed. </p>
<div class="note">
<h3 class="title"></h3>
<p>
  Do not confuse the window's window stream with its echo stream. The window
  stream is “owned” by the window, and dies with it.
  The echo stream is merely temporarily associated with the window.
</p>
</div>
<p>If a stream is closed, and it is the echo stream of one or more windows,
those windows are reset to not echo anymore. (So then calling
<a href="chimara-Echo-Streams.html#glk-window-get-echo-stream" title="glk_window_get_echo_stream ()"><code class="function">glk_window_get_echo_stream()</code></a> on them will return <code class="literal">NULL</code>.)</p>
</div>
<div class="refsect1" lang="en">
<a name="chimara-Echo-Streams.functions_details"></a><h2>Functions</h2>
<div class="refsect2" lang="en">
<a name="glk-window-set-echo-stream"></a><h3>glk_window_set_echo_stream ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
glk_window_set_echo_stream (<em class="parameter"><code><a href="chimara-Opaque-Objects.html#winid-t" title="winid_t"><span class="type">winid_t</span></a> win</code></em>,
                            <em class="parameter"><code><a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="type">strid_t</span></a> str</code></em>);</pre>
<p>Sets <em class="parameter"><code>win</code></em>
's echo stream to <em class="parameter"><code>str</code></em>
, which can be any valid output stream. You
can reset a window to stop echoing by calling 
<code class="literal">glk_window_set_echo_stream(win, NULL)</code>.</p>
<p>It is illegal to set a window's echo stream to be its 
<span class="emphasis"><em>own</em></span> window stream. That would create an infinite loop,
and is nearly certain to crash the Glk library. It is similarly illegal to
create a longer loop (two or more windows echoing to each other.)</p>
<div class="refsect3" lang="en">
<a name="glk-window-set-echo-stream.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>win</p></td>
<td class="parameter_description"><p>A window.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>str</p></td>
<td class="parameter_description"><p>A stream to attach to the window, or <code class="literal">NULL</code>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="glk-window-get-echo-stream"></a><h3>glk_window_get_echo_stream ()</h3>
<pre class="programlisting"><a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
glk_window_get_echo_stream (<em class="parameter"><code><a href="chimara-Opaque-Objects.html#winid-t" title="winid_t"><span class="type">winid_t</span></a> win</code></em>);</pre>
<p>Returns the echo stream of window <em class="parameter"><code>win</code></em>
. Initially, a window has no echo
stream, so <code class="literal">glk_window_get_echo_stream(win)</code> will return <code class="literal">NULL</code>.</p>
<div class="refsect3" lang="en">
<a name="glk-window-get-echo-stream.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>win</p></td>
<td class="parameter_description"><p>A window.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3" lang="en">
<a name="glk-window-get-echo-stream.returns"></a><h4>Returns</h4>
<p> A stream, or <code class="literal">NULL</code>.</p>
</div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="chimara-Echo-Streams.other_details"></a><h2>Types and Values</h2>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.25</div>
</body>
</html>