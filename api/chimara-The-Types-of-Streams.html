<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>The Types of Streams</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="Chimara Reference Manual">
<link rel="up" href="chimara-glk-spec-streams.html" title="Streams">
<link rel="prev" href="chimara-Testing-the-Appearance-of-Styles.html" title="Testing the Appearance of Styles">
<link rel="next" href="chimara-Other-Stream-Functions.html" title="Other Stream Functions">
<meta name="generator" content="GTK-Doc V1.25 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#chimara-The-Types-of-Streams.description" class="shortcut">Description</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="chimara-glk-spec-streams.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="chimara-Testing-the-Appearance-of-Styles.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="chimara-Other-Stream-Functions.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry" lang="en">
<a name="chimara-The-Types-of-Streams"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="chimara-The-Types-of-Streams.top_of_page"></a>The Types of Streams</span></h2>
<p>The Types of Streams — Window, memory, file, and resource streams</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1" lang="en">
<a name="chimara-The-Types-of-Streams.functions"></a><h2>Functions</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
</td>
<td class="function_name">
<a href="chimara-The-Types-of-Streams.html#glk-stream-open-memory" title="glk_stream_open_memory ()">glk_stream_open_memory</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
</td>
<td class="function_name">
<a href="chimara-The-Types-of-Streams.html#glk-stream-open-memory-uni" title="glk_stream_open_memory_uni ()">glk_stream_open_memory_uni</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
</td>
<td class="function_name">
<a href="chimara-The-Types-of-Streams.html#glk-stream-open-file" title="glk_stream_open_file ()">glk_stream_open_file</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
</td>
<td class="function_name">
<a href="chimara-The-Types-of-Streams.html#glk-stream-open-file-uni" title="glk_stream_open_file_uni ()">glk_stream_open_file_uni</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
</td>
<td class="function_name">
<a href="chimara-The-Types-of-Streams.html#glk-stream-open-resource" title="glk_stream_open_resource ()">glk_stream_open_resource</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
</td>
<td class="function_name">
<a href="chimara-The-Types-of-Streams.html#glk-stream-open-resource-uni" title="glk_stream_open_resource_uni ()">glk_stream_open_resource_uni</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1" lang="en">
<a name="chimara-The-Types-of-Streams.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;libchimara/glk.h&gt;
</pre>
</div>
<div class="refsect1" lang="en">
<a name="chimara-The-Types-of-Streams.description"></a><h2>Description</h2>
<div class="refsect2" lang="en">
<a name="chimara-Window-Streams"></a><h3>Window Streams</h3>
<p>Every window has an output stream associated with it. This is created
automatically, with <a href="chimara-Streams.html#filemode-Write" title="filemode_Write"><code class="literal">filemode_Write</code></a>, when you open the window. You get it
with <a href="chimara-Other-Window-Functions.html#glk-window-get-stream" title="glk_window_get_stream ()"><code class="function">glk_window_get_stream()</code></a>. Window streams always have rock value 0.</p>
<p>A window stream cannot be closed with <a href="chimara-Closing-Streams.html#glk-stream-close" title="glk_stream_close ()"><code class="function">glk_stream_close()</code></a>. It is closed
automatically when you close its window with <a href="chimara-Window-Opening-Closing-and-Constraints.html#glk-window-close" title="glk_window_close ()"><code class="function">glk_window_close()</code></a>.</p>
<p>Only printable characters (including newline) may be printed to a window
stream.
See <a href="chimara-Character-Encoding" target="_top">Character Encoding</a>.</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="chimara-Memory-Streams"></a><h3>Memory Streams</h3>
<p>You can open a stream which reads from or writes to a space in memory. See
<a href="chimara-The-Types-of-Streams.html#glk-stream-open-memory" title="glk_stream_open_memory ()"><code class="function">glk_stream_open_memory()</code></a> and <a href="chimara-The-Types-of-Streams.html#glk-stream-open-memory-uni" title="glk_stream_open_memory_uni ()"><code class="function">glk_stream_open_memory_uni()</code></a>. When opening a
memory stream, you specify a buffer to which the stream's output will be
written, and its length <em class="parameter"><code>buflen</code></em>
.</p>
<p>When outputting, if more than <em class="parameter"><code>buflen</code></em>
 characters are written to the stream,
all of them beyond the buffer length will be thrown away, so as not to
overwrite the buffer. (The character count of the stream will still be
maintained correctly. That is, it will count the number of characters written
into the stream, not the number that fit into the buffer.)</p>
<p>If the buffer is <code class="literal">NULL</code>, or for that matter if <em class="parameter"><code>buflen</code></em>
 is zero, then 
<span class="emphasis"><em>everything</em></span> written to the stream is thrown away. This
may be useful if you are interested in the character count.</p>
<p>When inputting, if more than <em class="parameter"><code>buflen</code></em>
 characters are read from the stream, the
stream will start returning -1 (signalling end-of-file.) If the buffer is 
<code class="literal">NULL</code>, the stream will always return end-of-file.</p>
<p>The data is written to the buffer exactly as it was passed to the printing
functions (<a href="chimara-How-to-Print.html#glk-put-char" title="glk_put_char ()"><code class="function">glk_put_char()</code></a>, etc.); input functions will read the data exactly
as it exists in memory. No platform-dependent cookery will be done on it.</p>
<div class="note">
<h3 class="title"></h3>
<p>
  You can write a disk file in text mode, but a memory stream is effectively
  always in binary mode.
</p>
</div>
<p>Whether reading or writing, the contents of the buffer are undefined until
the stream is closed. The library may store the data there as it is written,
or deposit it all in a lump when the stream is closed. It is illegal to
change the contents of the buffer while the stream is open.</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="chimara-File-Streams"></a><h3>File Streams</h3>
<p>You can open a stream which reads from or writes to a disk file. See 
<a href="chimara-The-Types-of-Streams.html#glk-stream-open-file" title="glk_stream_open_file ()"><code class="function">glk_stream_open_file()</code></a> and <a href="chimara-The-Types-of-Streams.html#glk-stream-open-file-uni" title="glk_stream_open_file_uni ()"><code class="function">glk_stream_open_file_uni()</code></a>.</p>
<p>The file may be written in text or binary mode; this is determined by the
file reference you open the stream with. Similarly, platform-dependent
attributes such as file type are determined by the file reference.
See <a href="chimara-File-References" target="_top">File References</a>.</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="chimara-Resource-Streams"></a><h3>Resource Streams</h3>
<p>You can open a stream which reads from (but not writes to) a resource file.</p>
<div class="note">
<h3 class="title"></h3>
<p>
  Typically this is embedded in a Blorb file, as Blorb is the official
  resource-storage format of Glk. A Blorb file can contain images and sounds,
  but it can also contain raw data files, which are accessed by
  <a href="chimara-The-Types-of-Streams.html#glk-stream-open-resource" title="glk_stream_open_resource ()"><code class="function">glk_stream_open_resource()</code></a> and <a href="chimara-The-Types-of-Streams.html#glk-stream-open-resource-uni" title="glk_stream_open_resource_uni ()"><code class="function">glk_stream_open_resource_uni()</code></a>. A data file
  is identified by number, not by a filename. The Blorb usage field will be
  <code class="code">'Data'</code>. The chunk type will be <a href="chimara-What-the-Blorb-Layer-Does.html#giblorb-ID-TEXT" title="giblorb_ID_TEXT"><code class="literal">giblorb_ID_TEXT</code></a> for text
  resources, <a href="chimara-What-the-Blorb-Layer-Does.html#giblorb-ID-BINA" title="giblorb_ID_BINA"><code class="literal">giblorb_ID_BINA</code></a> for binary resources.
</p>
</div>
<div class="note">
<h3 class="title"></h3>
<p>
  If the running program is not associated with a Blorb file, the library may
  look for data files as actual files instead. These would be named
  <code class="filename">DATA1</code>, <code class="filename">DATA2</code>, etc, with a suffix
  distinguishing text and binary files. See “Other Resource Arrangements”
  in the Blorb spec: <a href="http://eblong.com/zarf/blorb/" target="_top">http://eblong.com/zarf/blorb/</a>
</p>
</div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="chimara-The-Types-of-Streams.functions_details"></a><h2>Functions</h2>
<div class="refsect2" lang="en">
<a name="glk-stream-open-memory"></a><h3>glk_stream_open_memory ()</h3>
<pre class="programlisting"><a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
glk_stream_open_memory (<em class="parameter"><code><span class="type">char</span> *buf</code></em>,
                        <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> buflen</code></em>,
                        <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> fmode</code></em>,
                        <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> rock</code></em>);</pre>
<p>Opens a stream which reads from or writes to a space in memory. <em class="parameter"><code>buf</code></em>
 points
to the buffer where output will be read from or written to. <em class="parameter"><code>buflen</code></em>
 is the
length of the buffer.</p>
<p>Unicode values (characters greater than 255) cannot be written to the buffer.
If you try, they will be stored as 0x3F (<code class="literal">"?"</code>) characters.</p>
<div class="refsect3" lang="en">
<a name="glk-stream-open-memory.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>buf</p></td>
<td class="parameter_description"><p>An allocated buffer, or <code class="literal">NULL</code>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>buflen</p></td>
<td class="parameter_description"><p>Length of <em class="parameter"><code>buf</code></em>
.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>fmode</p></td>
<td class="parameter_description"><p>Mode in which the buffer will be opened. Must be one of
<a href="chimara-Streams.html#filemode-Read" title="filemode_Read"><code class="literal">filemode_Read</code></a>, <a href="chimara-Streams.html#filemode-Write" title="filemode_Write"><code class="literal">filemode_Write</code></a>, or <a href="chimara-Streams.html#filemode-ReadWrite" title="filemode_ReadWrite"><code class="literal">filemode_ReadWrite</code></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>rock</p></td>
<td class="parameter_description"><p>The new stream's rock value.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3" lang="en">
<a name="glk-stream-open-memory.returns"></a><h4>Returns</h4>
<p> the new stream, or <code class="literal">NULL</code> on error.</p>
</div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="glk-stream-open-memory-uni"></a><h3>glk_stream_open_memory_uni ()</h3>
<pre class="programlisting"><a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
glk_stream_open_memory_uni (<em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> *buf</code></em>,
                            <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> buflen</code></em>,
                            <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> fmode</code></em>,
                            <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> rock</code></em>);</pre>
<p>Works just like <a href="chimara-The-Types-of-Streams.html#glk-stream-open-memory" title="glk_stream_open_memory ()"><code class="function">glk_stream_open_memory()</code></a>, except that the buffer is an array
of 32-bit words, instead of bytes. This allows you to write and read any
Unicode character. The <em class="parameter"><code>buflen</code></em>
 is the number of words, not the number of
bytes.</p>
<div class="refsect3" lang="en">
<a name="glk-stream-open-memory-uni.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>buf</p></td>
<td class="parameter_description"><p>An allocated buffer, or <code class="literal">NULL</code>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>buflen</p></td>
<td class="parameter_description"><p>Length of <em class="parameter"><code>buf</code></em>
.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>fmode</p></td>
<td class="parameter_description"><p>Mode in which the buffer will be opened. Must be one of
<a href="chimara-Streams.html#filemode-Read" title="filemode_Read"><code class="literal">filemode_Read</code></a>, <a href="chimara-Streams.html#filemode-Write" title="filemode_Write"><code class="literal">filemode_Write</code></a>, or <a href="chimara-Streams.html#filemode-ReadWrite" title="filemode_ReadWrite"><code class="literal">filemode_ReadWrite</code></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>rock</p></td>
<td class="parameter_description"><p>The new stream's rock value.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3" lang="en">
<a name="glk-stream-open-memory-uni.returns"></a><h4>Returns</h4>
<p> the new stream, or <code class="literal">NULL</code> on error.</p>
</div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="glk-stream-open-file"></a><h3>glk_stream_open_file ()</h3>
<pre class="programlisting"><a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
glk_stream_open_file (<em class="parameter"><code><a href="chimara-Opaque-Objects.html#frefid-t" title="frefid_t"><span class="type">frefid_t</span></a> fileref</code></em>,
                      <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> fmode</code></em>,
                      <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> rock</code></em>);</pre>
<p>Opens a stream which reads to or writes from a disk file. If <em class="parameter"><code>fmode</code></em>
 is
<a href="chimara-Streams.html#filemode-Read" title="filemode_Read"><code class="literal">filemode_Read</code></a>, the file must already exist; for the other modes, an empty
file is created if none exists. If <em class="parameter"><code>fmode</code></em>
 is <a href="chimara-Streams.html#filemode-Write" title="filemode_Write"><code class="literal">filemode_Write</code></a>, and the file
already exists, it is truncated down to zero length (an empty file); the
other modes do not truncate. If <em class="parameter"><code>fmode</code></em>
 is <a href="chimara-Streams.html#filemode-WriteAppend" title="filemode_WriteAppend"><code class="literal">filemode_WriteAppend</code></a>, the file
mark is set to the end of the file.</p>
<div class="note">
<h3 class="title"></h3>
<p>
  Note, again, that this doesn't match stdio's <code class="function">fopen()</code> call very well. See
  <a href="chimara-Streams.html#filemode-WriteAppend" title="filemode_WriteAppend">the file mode constants</a>.
</p>
</div>
<p>If the filemode requires the file to exist, but the file does not exist,
<a href="chimara-The-Types-of-Streams.html#glk-stream-open-file" title="glk_stream_open_file ()"><code class="function">glk_stream_open_file()</code></a> returns <code class="literal">NULL</code>.</p>
<p>The file may be read or written in text or binary mode; this is determined
by the <em class="parameter"><code>fileref</code></em>
 argument. Similarly, platform-dependent attributes such as
file type are determined by <em class="parameter"><code>fileref</code></em>
.
See <a href="chimara-File-References.html" title="File References">File References</a>.</p>
<p>When writing in binary mode, Unicode values (characters greater than 255)
cannot be written to the file. If you try, they will be stored as 0x3F
(<code class="literal">"?"</code>) characters. In text mode, Unicode values may be stored
exactly, approximated, or abbreviated, depending on what the platform's text
files support.</p>
<div class="refsect3" lang="en">
<a name="glk-stream-open-file.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>fileref</p></td>
<td class="parameter_description"><p>Indicates the file which will be opened.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>fmode</p></td>
<td class="parameter_description"><p>Mode in which the file will be opened. Can be any of <a href="chimara-Streams.html#filemode-Read" title="filemode_Read"><code class="literal">filemode_Read</code></a>,
<a href="chimara-Streams.html#filemode-Write" title="filemode_Write"><code class="literal">filemode_Write</code></a>, <a href="chimara-Streams.html#filemode-WriteAppend" title="filemode_WriteAppend"><code class="literal">filemode_WriteAppend</code></a>, or <a href="chimara-Streams.html#filemode-ReadWrite" title="filemode_ReadWrite"><code class="literal">filemode_ReadWrite</code></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>rock</p></td>
<td class="parameter_description"><p>The new stream's rock value.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3" lang="en">
<a name="glk-stream-open-file.returns"></a><h4>Returns</h4>
<p> A new stream, or <code class="literal">NULL</code> if the file operation failed.</p>
</div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="glk-stream-open-file-uni"></a><h3>glk_stream_open_file_uni ()</h3>
<pre class="programlisting"><a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
glk_stream_open_file_uni (<em class="parameter"><code><a href="chimara-Opaque-Objects.html#frefid-t" title="frefid_t"><span class="type">frefid_t</span></a> fileref</code></em>,
                          <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> fmode</code></em>,
                          <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> rock</code></em>);</pre>
<p>This works just like <a href="chimara-The-Types-of-Streams.html#glk-stream-open-file" title="glk_stream_open_file ()"><code class="function">glk_stream_open_file()</code></a>, except that in binary mode,
characters are written and read as four-byte (big-endian) values. This
allows you to write any Unicode character.</p>
<p>In text mode, the file is written and read in a platform-dependent way, which
may or may not handle all Unicode characters. A text-mode file created with
<a href="chimara-The-Types-of-Streams.html#glk-stream-open-file-uni" title="glk_stream_open_file_uni ()"><code class="function">glk_stream_open_file_uni()</code></a> may have the same format as a text-mode file
created with <a href="chimara-The-Types-of-Streams.html#glk-stream-open-file" title="glk_stream_open_file ()"><code class="function">glk_stream_open_file()</code></a>; or it may use a more Unicode-friendly
format.</p>
<div class="refsect3" lang="en">
<a name="glk-stream-open-file-uni.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>fileref</p></td>
<td class="parameter_description"><p>Indicates the file which will be opened.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>fmode</p></td>
<td class="parameter_description"><p>Mode in which the file will be opened. Can be any of <a href="chimara-Streams.html#filemode-Read" title="filemode_Read"><code class="literal">filemode_Read</code></a>,
<a href="chimara-Streams.html#filemode-Write" title="filemode_Write"><code class="literal">filemode_Write</code></a>, <a href="chimara-Streams.html#filemode-WriteAppend" title="filemode_WriteAppend"><code class="literal">filemode_WriteAppend</code></a>, or <a href="chimara-Streams.html#filemode-ReadWrite" title="filemode_ReadWrite"><code class="literal">filemode_ReadWrite</code></a>.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>rock</p></td>
<td class="parameter_description"><p>The new stream's rock value.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3" lang="en">
<a name="glk-stream-open-file-uni.returns"></a><h4>Returns</h4>
<p> A new stream, or <code class="literal">NULL</code> if the file operation failed.</p>
</div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="glk-stream-open-resource"></a><h3>glk_stream_open_resource ()</h3>
<pre class="programlisting"><a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
glk_stream_open_resource (<em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> filenum</code></em>,
                          <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> rock</code></em>);</pre>
<p>Open the given data resource for reading (only), as a normal stream.</p>
<div class="note">
<h3 class="title"></h3>
<p>
  Note that there is no notion of file usage — the resource does not
  have to be specified as “saved game” or whatever.
</p>
</div>
<p>If no resource chunk of the given number exists, the open function returns
<code class="literal">NULL</code>.</p>
<p>As with file streams, a binary resource stream reads the resource as bytes. A
text resource stream reads characters encoded as Latin-1.</p>
<p>When reading from a resource stream, newlines are not remapped, even if they
normally would be when reading from a text file on the host OS. If you read a
line (<a href="chimara-How-to-Read.html#glk-get-line-stream" title="glk_get_line_stream ()"><code class="function">glk_get_line_stream()</code></a> or <a href="chimara-How-to-Read.html#glk-get-line-stream-uni" title="glk_get_line_stream_uni ()"><code class="function">glk_get_line_stream_uni()</code></a>), a Unix newline
(0x0A) terminates the line.</p>
<div class="refsect3" lang="en">
<a name="glk-stream-open-resource.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>filenum</p></td>
<td class="parameter_description"><p>Resource chunk number to open.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>rock</p></td>
<td class="parameter_description"><p>The new stream's rock value.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3" lang="en">
<a name="glk-stream-open-resource.returns"></a><h4>Returns</h4>
<p> the new stream, or <code class="literal">NULL</code>.</p>
</div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="glk-stream-open-resource-uni"></a><h3>glk_stream_open_resource_uni ()</h3>
<pre class="programlisting"><a href="chimara-Opaque-Objects.html#strid-t" title="strid_t"><span class="returnvalue">strid_t</span></a>
glk_stream_open_resource_uni (<em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> filenum</code></em>,
                              <em class="parameter"><code><a href="chimara-Basic-Types.html#glui32" title="glui32"><span class="type">glui32</span></a> rock</code></em>);</pre>
<p>Open the given data resource for reading (only), as a Unicode stream. See
<a href="chimara-The-Types-of-Streams.html#glk-stream-open-resource" title="glk_stream_open_resource ()"><code class="function">glk_stream_open_resource()</code></a> for more information.</p>
<p>As with file streams, a binary resource stream reads the resource as
four-byte (big-endian) words. A text resource stream reads characters encoded
as UTF-8.</p>
<div class="note">
<h3 class="title"></h3>
<p>
  Thus, the difference between text and binary resources is only important
  when opened as a Unicode stream.
</p>
</div>
<div class="refsect3" lang="en">
<a name="glk-stream-open-resource-uni.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>filenum</p></td>
<td class="parameter_description"><p>Resource chunk number to open.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>rock</p></td>
<td class="parameter_description"><p>The new stream's rock value.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3" lang="en">
<a name="glk-stream-open-resource-uni.returns"></a><h4>Returns</h4>
<p> the new stream, or <code class="literal">NULL</code>.</p>
</div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="chimara-The-Types-of-Streams.other_details"></a><h2>Types and Values</h2>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.25</div>
</body>
</html>